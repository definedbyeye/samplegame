/*
 * Plugin Name: Resize Image to Parent Container
 *
 * Author: Christian Varga
 * Author URI: http://christianvarga.com
 * Plugin Source: https://github.com/levymetal/jquery-resize-image-to-parent/
 *
 */

(function($) {
  $.fn.resizeToParent = function(opts) {
    var defaults = {
      parent: 'div'
    }

    var opts = $.extend(defaults, opts);

    function positionObj(obj) {
      // dimensions of the parent
      var parentWidth = obj.parents(opts.parent).width();
      var parentHeight = obj.parents(opts.parent).height();

      // dimensions of the image
      var objWidth = obj.width();
      var objHeight = obj.height();

      // step 1 - calculate the percentage difference between image width and container width
      var diff = objWidth / parentWidth;

      // step 2 - if height divided by difference is smaller than container height, resize by height. otherwise resize by width
      if ((objHeight / diff) < parentHeight) {
        objWidth = objWidth / (objHeight / parentHeight);
        objHeight = parentHeight;
      }
      else {
        objWidth = parentWidth;
        objHeight = objHeight / diff;
      }

      obj.css({'width': objWidth, 'height': objHeight});

      // step 3 - center image in container
      var leftOffset = (objWidth - parentWidth) / -2;
      var topOffset = (objHeight - parentHeight) / -2;

    }

    return this.each(function() {
      positionObj($(this));
    });
  }
})( jQuery );